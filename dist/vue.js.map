{"version":3,"file":"vue.js","sources":["../src/compiler/parse.js","../src/compiler/index.js","../src/observe/dep.js","../src/observe/array.js","../src/observe/index.js","../src/observe/watcher.js","../src/state.js","../src/vdom/index.js","../src/vdom/path.js","../src/observe/lifecycle.js","../src/utils.js","../src/init.js","../src/globalAPI.js","../src/index.js"],"sourcesContent":["const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);//开始标签\n\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);//闭合标签\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>]+)))?/;//匹配属性\nconst startTagClose = /^\\s*(\\/?)>/;//自定义或闭合标签\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;//匹配表达式变量\n\n\nexport function parseHTML(html) {\n    const ELEMENT_TYPE = 1\n    const TEXT_TYPE = 3;\n    const stack = [];\n    let currentParent;\n    let root\n    //栈结构，创建ast节点\n    function createASTElement(tag, attrs) {\n        return {\n            tag,\n            type: ELEMENT_TYPE,\n            children: [],\n            attrs,\n            parent: null\n        }\n    }\n\n    function start(tag, attrs) {\n        let node = createASTElement(tag, attrs)\n        if (!root) {//是否是父元素\n            root = node\n        }\n        if (currentParent) {\n            node.parent = currentParent;\n            currentParent.children.push(node)\n        }\n        stack.push(node);\n        currentParent = node//栈的最后一个\n\n    }\n    function chars(text) {\n        text = text.replace(/\\s/g, \"\")\n        text && currentParent.children.push({\n            type: TEXT_TYPE,\n            text,\n            parent: currentParent\n        })\n    }\n    function end() {\n        stack.pop()//弹出最后一个\n        currentParent = stack[stack.length - 1]\n    }\n\n\n\n    function advance(n) {\n        html = html.substring(n)\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen)\n        if (start) {\n            const match = {\n                tagName: start[1],//标签名\n                attrs: []\n            }\n            advance(start[0].length)\n            //如果不是开始的结束标签，就要一直匹配\n            let attr;\n            let end;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                advance(attr[0].length)\n                match.attrs.push({\n                    name: attr[1],\n                    value: attr[3] || attr[4] || attr[5] || true\n                })\n            }\n            if (end) {\n                advance(end[0].length)\n            }\n            return match\n        }\n\n        return false\n    }\n    //console.log(html)\n    while (html) {\n        //如果textEnd为0，说明是一个开始或结束标签，>0,文本结束位置\n        let textEnd = html.indexOf(\"<\")\n        if (textEnd == 0) {\n            const startTagMatch = parseStartTag()\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs)\n                continue\n            }\n            let endTagMatch = html.match(endTag)\n            if (endTagMatch) {\n                advance(endTagMatch[0].length)\n                end()\n                continue\n            }\n        }\n\n        if (textEnd >= 0) {//文本\n            let text = html.substring(0, textEnd)//文本内容\n            if (text) {\n                chars(text)\n                advance(text.length)\n            }\n        }\n    }\n\n    return root\n}","import { parseHTML } from \"./parse\"\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;//匹配表达式变量\n\n\nfunction genProps(attrs) {\n    let str = \"\"\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i]\n        if (attr.name === \"style\") {\n            let obj = {}\n            attr.value.split(\";\").forEach(item => {\n                let [key, value] = item.split(\":\")\n                obj[key] = value\n            });\n            attr.value = obj\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(node) {\n    if (node.type === 1) {\n        return codeGen(node)\n    } else {\n        let text = node.text\n        if (!defaultTagRE.test(text)) {\n            return `_v(${JSON.stringify(text)})`\n        } else {\n            let token = [];\n            let match\n            defaultTagRE.lastIndex = 0\n            let lastIndex = 0\n            while (match = defaultTagRE.exec(text)) {\n                let index = match.index;\n                if (index > lastIndex) {\n                    token.push(JSON.stringify(text.slice(lastIndex, index)))\n                }\n                token.push(`_s(${match[1].trim()})`)\n                lastIndex = index + match[0].length\n            }\n            if (lastIndex < text.length) {\n                token.push(JSON.stringify(text.slice(lastIndex)))\n\n            }\n\n            return `_v(${token.join(\"+\")})`\n        }\n    }\n}\n\nfunction genChildren(children) {\n    //console.log(children)\n    return children.map(child => gen(child)).join(\",\")\n}\n\nfunction codeGen(ast) {\n    let children = genChildren(ast.children)\n    let code = (`_c('${ast.tag}',${ast.attrs.length > 0 ? genProps(ast.attrs) : 'null'}${ast.children.length ? `,${children}` : ''})`)\n\n    //console.log(code)\n    return code\n}\n\nexport function compileToFunction(template) {\n    //将template 转化为ast语法树\n    let ast = parseHTML(template)\n    //console.log(template)\n    //console.log(ast)\n    //生成render方法，执行render方法，返回虚拟dom\n    let code = codeGen(ast)\n    //console.log(code)\n    code = `with(this){return ${code}}`\n    //console.log(code)\n    let render = new Function(code)\n    //console.log(render.toString())\n    return render\n}","let id = 0\nclass Dep {\n    constructor() {\n        this.id = id++//属性dep要收集watcher\n        this.subs = []//当前属性对应的watcher\n    }\n    depend() {\n\n        Dep.target.addDep(this)//让watcher记住dep\n        //this.subs.push(Dep.target)//会重复取dep\n    }\n    addSub(watcher) {\n        this.subs.push(watcher)\n    }\n    notify() {\n        this.subs.forEach(watcher => watcher.update())\n    }\n}\n\nDep.target = null\n\nlet stack = [];\nexport function pushTarget(watcher) {\n    stack.push(watcher)\n    Dep.target = watcher\n}\nexport function popTarget() {\n    stack.pop()\n    Dep.target = stack[stack.length - 1]\n}\n\nexport default Dep","//重新数组的部分方法\n\nlet oldArrayProto = Array.prototype\n\n//newArrayProto.__proto__ = oldArrayProto,不用担心原数组方法被重写\nlet newArrayProto = Object.create(oldArrayProto)\n\nlet methods = [//快速找到重写方法\n    \"push\",\n    \"pop\",\n    \"shift\",\n    \"unshift\",\n    \"reverse\",\n    \"sort\",\n    \"splice\"\n]\n\nmethods.forEach(method => {\n    newArrayProto[method] = function (...args) {//重写数组方法\n        //this指向arr\n        const result = oldArrayProto[method].call(this, ...args)//内部调原来方法，\n\n        //对新增的属性进行劫持，拿到observeArray\n        let inserted;\n        let ob = this.__ob__;\n        // if (method === \"push\" || method === \"unshift\") {\n        //     inserted = args\n        // }\n        // if (method === \"splice\") {\n        //     inserted = args.slice(2)\n        // }\n\n        switch (method) {//获取新加的属性\n            case \"push\":\n            case \"unshift\":\n                inserted = args;\n                break;\n            case \"splice\":\n                inserted = args.slice(2);\n            default:\n                break;\n        }\n\n        if (inserted) {\n            ob.observeArray(inserted)\n        }\n        ob.dep.notify()\n        return result\n    }\n})\n\nexport {\n    newArrayProto\n}","import { newArrayProto } from \"./array\"\nimport Dep from \"./dep\"\n\nclass Observe {\n    constructor(data) {\n        this.dep = new Dep()//给每个对象添加dep\n\n        Object.defineProperty(data, \"__ob__\", {//设置不可枚举的__ob__,不然会爆站\n            value: this,\n            enumerable: false\n        })\n\n        //data.__ob__ = this//給数据加了一个标识，如果数据上有__ob__,就代表劫持过了，不能在这里写\n        //defineProperty只能劫持已经存在的\n        //遍历data\n        if (Array.isArray(data)) {//判断是数组还是对象\n            data.__proto__ = newArrayProto//重写数组的部分（7个）方法,保留数组原有的方法\n\n            this.observeArray(data)\n        } else {\n            this.walk(data)\n        }\n    }\n    walk(data) {\n        //重新定义，性能差\n        Object.keys(data).forEach(key => {\n            defineReactive(data, key, data[key])//属性劫持\n        })\n    }\n    observeArray(data) {\n        data.forEach(item => {\n            observe(item)//数组遍历劫持\n        })\n    }\n}\n\nfunction dependArray(value) {\n    for (let i = 0; i < value.length; i++) {\n        let current = value[i]\n        current.__ob__ && current.__ob__.dep.depend()\n        if (Array.isArray(current)) {\n            dependArray(current)\n        }\n\n    }\n}\n\nexport function defineReactive(target, key, value) {//闭包\n    let childOb = observe(value)//值是对象，再次进行属性劫持\n    let dep = new Dep()//对应的dep，每个属性都有dep\n    Object.defineProperty(target, key, {\n        get() {//取值\n            if (Dep.target) {\n                dep.depend()\n                if (childOb) {\n                    childOb.dep.depend()//让对象和数组进行依赖收集\n                    if (Array.isArray(value)) {\n                        dependArray(value)\n                    }\n                }\n            }\n            return value\n        },\n        set(newValue) {//设置值\n            if (newValue === value) return\n            observe(value)\n            value = newValue\n            dep.notify()//通知更新\n        }\n    })\n}\n\nexport function observe(data) {\n    //对对象进行数据劫持\n    //判断是否是对象\n    if (typeof data != \"object\" || data == null) {\n        return\n    }\n    if (data.__ob__ instanceof Observe) {//说明对象被代理过\n        return data.__ob__\n    }\n\n    return new Observe(data)\n}","import Dep, { popTarget, pushTarget } from \"./dep\";\n\nlet id = 0\n\nclass Watcher {\n    constructor(vm, exprOrFn, options, cb) {\n        //console.log([...arguments][2])\n        this.vm = vm\n        this.id = id++;\n        this.renderWatcher = options; //渲染watcher\n        //console.log(typeof exprOrFn)\n        if (typeof exprOrFn === \"string\") {\n            this.getter = function () {\n                //console.log(vm[exprOrFn])\n                return vm[exprOrFn]\n            };\n            //this.run()\n\n        } else {\n            this.getter = exprOrFn;\n\n        }\n        // console.log(exprOrFn, options)\n        this.cb = cb;\n        this.deps = [];\n        this.depsID = new Set();\n        this.lazy = options.lazy;\n        this.dirty = this.lazy;\n\n        this.user = options.user\n        this.value = this.lazy ? undefined : this.get()\n        // if (this.value) {\n        //     this.run()\n        // }\n        // console.log(options.update)\n        if (options) {\n            this.run()\n        }\n        //console.log(options.update)\n\n\n    }\n    get() {\n        //Dep.target = this//只有一份\n        //console.log(this.user, \"123456\")\n        pushTarget(this)\n        let value = this.getter.call(this.vm)//去vm取值\n        // Dep.target = null\n        popTarget()\n        return value\n    }\n    evaluate() {//计算属性\n        this.value = this.get()\n        this.dirty = false\n    }\n    addDep(dep) {\n        let id = dep.id\n        if (!this.depsID.has(id)) {\n            this.deps.push(dep)\n            this.depsID.add(id)\n            dep.addSub(this)\n        }\n    }\n    update() {\n        //console.log(this.user, \"123456\")\n        if (this.lazy) {\n            this.dirty = true\n        } else {\n            //this.get()//从新渲染\n            //console.log(this.user, \"123456\")\n            queueWatcher(this)//把当前watcher暂存,然后全部更新\n        }\n\n    }\n    depend() {\n        let i = this.deps.length\n        while (i--) {\n            this.deps[i].depend()\n        }\n    }\n    run() {\n        console.log(this)\n        let oldVal = this.value\n        let newVal = this.get()\n        if (this.user) {\n            //console.log(this.cb)\n            this.cb.call(this.vm, newVal, oldVal)\n        }\n    }\n}\n\nlet queue = []\nlet has = {}\nlet pending = false\n\nfunction flushSchedulerQueue() {\n    let flushQueue = queue.slice(0)\n    queue = []\n    has = {}\n    pending = false\n    flushQueue.forEach(item => item.run())\n}\n\n\nfunction queueWatcher(watcher) {\n    //console.log(watcher)\n    //const id = watcher.id\n    if (!has[id]) {\n        queue.push(watcher)\n        has[id] = true\n        if (!pending) {\n            setTimeout(flushSchedulerQueue, 0);\n            pending = true\n        }\n    }\n}\n\nlet callback = []\nlet waiting = false\n\nfunction flushCallbacks() {\n    let cbs = callback.slice(0)\n    waiting = true\n    callback = []\n    cbs.forEach(cb => cb())\n}\n//nextTick没有使用api，而是采用降级的方式\n\nlet timeFunc;\n\nif (Promise) {\n    timeFunc = () => {\n        Promise.resolve().then(flushCallbacks())\n    }\n} else if (MutationObserver) {\n    let observe = new MutationObserver(flushCallbacks)\n    let textNode = document.createTextNode(1)\n    observe.observe(textNode, {\n        characterData: true\n    })\n    timeFunc = () => {\n        textNode.textContent = 2\n    }\n} else if (setImmediate) {\n    timeFunc = () => {\n        setImmediate(flushCallbacks)\n    }\n} else {\n    setTimeout(flushCallbacks)\n}\n\nexport function nextTick(cb) {//不是创建一个异步任务\n    callback.push(cb)\n    if (!waiting) {\n        timeFunc()\n        waiting = false\n    }\n}\n\nexport default Watcher","import Dep from \"./observe/dep\";\nimport { observe } from \"./observe/index\";\nimport Watcher, { nextTick } from \"./observe/watcher\";\n\n//import (observer)\n\nexport function initState(vm) {\n    const opts = vm.$options;\n    if (opts.data) {\n        initData(vm)\n    }\n    if (opts.computed) {\n        initComputed(vm)\n    }\n    if (opts.watch) {\n        initWatch(vm)\n    }\n}\nfunction proxy(vm, target, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[target][key]\n        },\n        set(newValue) {\n            vm[target][key] = newValue\n        }\n    })\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data;//用户数据,data可能是函数，或对象\n    data = typeof data === \"function\" ? data.call(vm) : data;\n    //console.log(data)\n\n    vm._data = data//返回对象到_data\n\n    observe(data)//defineProperty劫持\n\n    //将vm._data用vm代理\n    for (let key in data) {\n        proxy(vm, \"_data\", key)\n    }\n}\n\nfunction initComputed(vm) {\n    const computed = vm.$options.computed\n    const watchers = vm._computedWatchers = {}\n    for (let key in computed) {\n        let userDef = computed[key]\n\n        let fn = typeof userDef === \"function\" ? userDef : userDef.get\n\n        watchers[key] = new Watcher(vm, fn, { lazy: true })\n\n        defineComputed(vm, key, userDef)\n    }\n}\n\nfunction defineComputed(target, key, userDef) {\n    typeof userDef === \"function\" ? userDef : userDef.get\n    const setter = userDef.set || (() => { })\n    Object.defineProperty(target, key, {\n        get: createComputedGetter(key),\n        set: setter\n    })\n}\n\nfunction createComputedGetter(key) {\n    return function () {\n        const watcher = this._computedWatchers[key]\n        if (watcher.dirty) {\n            watcher.evaluate()\n        }\n        if (Dep.target) {\n            watcher.depend()\n        }\n\n        return watcher.value\n    }\n}\n\nfunction initWatch(vm) {\n    let watch = vm.$options.watch\n    for (let key in watch) {\n        const handler = watch[key]\n        if (Array.isArray(handler)) {\n            for (let i = 0; i < handler.length; i++) {\n                createWatcher(vm, key, handler[i])\n            }\n        } else {\n            createWatcher(vm, key, handler)\n        }\n    }\n}\n\nfunction createWatcher(vm, key, handler) {\n    //console.log(key, handler)\n    if (typeof handler === \"string\") {\n        handler = vm[handler]\n    }\n\n\n    return vm.$watch(key, handler)\n\n}\n\nexport function initStateMixin(Vue) {\n    Vue.prototype.$nextTick = nextTick\n\n    Vue.prototype.$watch = function (exprOrFn, cb) {\n        //console.log(exprOrFn, cb)\n        new Watcher(this, exprOrFn, { user: true }, cb)\n    }\n}","//_h,_c\n\nconst isReservedTag = (tag) => {\n    return [\"a\", \"div\", \"p\", \"button\", \"span\"].includes(tag)\n}\n\nexport function createElementVNode(vm, tag, data, ...children) {\n\n    if (data == null) {\n        data = {}\n    }\n    let key = data.key\n    if (key) {\n        delete data.key\n    }\n\n    if (isReservedTag(tag)) {\n        return vNode(vm, tag, key, data, children)\n    } else {\n\n        let Ctor = vm.$options.components[tag]\n        //return vNode(vm, tag, key, data, children)\n        return createComponentVNode(vm, tag, key, data, children, Ctor)\n    }\n}\nfunction createComponentVNode(vm, tag, key, data, children, Ctor) {\n    if (typeof Ctor === \"object\") {\n        Ctor = vm.$options._base.extend(Ctor)\n    }\n    //debugger;\n    data.hook = {\n        init(vNode) {\n            let instance = vNode.componentInstance = new vNode.componentOptions.Ctor\n            instance.$mount()\n        }\n    }\n\n    return vNode(vm, tag, key, data, children, null, { Ctor })\n}\n\n//_v\nexport function createTextVNode(vm, text) {\n    return vNode(vm, undefined, undefined, undefined, undefined, text)\n}\n\nfunction vNode(vm, tag, key, data, children, text, componentOptions) {\n    return {\n        vm,\n        tag,\n        key,\n        data,\n        children,\n        text,\n        componentOptions\n    }\n}\n\nexport function isSameVNode(oldNode, newNode) {\n\n    return oldNode.tag === newNode.key && oldNode.key === newNode.key\n\n}\n","import { isSameVNode } from \"../vdom/index.js\"\n\nexport function patchProps(el, oldProps = {}, props = {}) {\n\n    let oldStyle = oldProps.style\n    let newStyle = props.style\n\n    for (let key in oldStyle) {\n        if (!newStyle[key]) {\n            el.style[key] = \"\"\n        }\n    }\n    for (let key in oldProps) {\n        if (!props[key]) {\n            el.removeAttribute(key)\n        }\n    }\n    for (let key in props) {\n\n        if (key === \"style\") {\n            for (let styleName in props.style) {\n                el.style[styleName] = props.style[styleName]\n            }\n        } else {\n            el.setAttribute(key, props[key])\n        }\n\n\n    }\n\n\n}\n\nfunction createComponent(vNode) {\n    let v = vNode.data\n    if ((v = v.hook) && (v = v.init)) {\n        v(vNode)\n    }\n    if (vNode.componentInstance) {\n        return true\n    }\n}\nexport function createElm(vNode) {//创建dom\n    //debugger;\n    let { tag, data, children, text } = vNode\n    console.log(tag, vNode)\n    if (typeof tag === \"string\") {\n\n        if (createComponent(vNode)) {\n            return vNode.componentInstance.$el\n        }\n        vNode.el = document.createElement(tag)\n        patchProps(vNode.el, {}, data)\n        //debugger;\n\n        children.forEach(item => {\n            console.log(item)\n            vNode.el.appendChild(createElm(item))\n\n\n        });\n    } else {\n        vNode.el = document.createTextNode(text)\n    }\n\n    return vNode.el\n}\n\nexport function patch(oldVNode, vNode) {\n\n    if (!oldVNode) return createElm(vNode)\n\n    const isRealElement = oldVNode.nodeType\n\n    if (isRealElement) {//渲染dom\n        const elm = oldVNode//获取真实dom\n        const parentElm = elm.parentNode//父元素\n\n        let newElm = createElm(vNode)\n\n        parentElm.insertBefore(newElm, elm.nextSibling)\n        parentElm.removeChild(elm)//删除老节点\n\n        return newElm\n\n    } else {//diff算法\n        //同级比较，判断key\n\n        patchVNode(oldVNode, vNode)\n\n\n\n    }\n}\n\nfunction patchVNode(oldVNode, vNode) {\n    if (isSameVNode(oldVNode, vNode)) {//父节点判断\n        let el = createElm(vNode)\n        oldVNode.el.parentNode.removeChild(el, oldVNode.el)\n        return el\n    }\n\n    let el = vNode.el = oldVNode.el//复用父节点\n    if (!oldVNode.tag) {//判断文本\n        if (oldVNode.text !== vNode.text) {\n            el.textContent = vNode.text\n        }\n    }\n\n    patchProps(el, oldVNode.data, vNode.data)//判断标签\n\n    //比较儿子\n    let oldChildren = oldVNode.children || []\n    let newChildren = vNode.children || []\n\n    if (oldChildren > 0 && newChildren > 0) {//都有儿子\n        updateChildren(el, oldChildren, newChildren)\n    } else if (newChildren > 0) {//只有新儿子\n        mountChildren(el, newChildren)\n    } else if (oldChildren > 0) {//只有老儿子\n        unmountChildren(el, oldChildren)\n    }\n    return el\n}\nfunction updateChildren(el, oldChildren, newChildren) {\n    let oldStartIndex = 0\n    let newStartIndex = 0\n    let oldEndIndex = oldChildren.length - 1\n    let newEndIndex = newChildren.length - 1\n\n    let oldStartVNode = oldChildren[0]\n    let newStartVNode = newChildren[0]\n    let oldEndVNode = oldChildren[oldEndIndex]\n    let newEndVNode = newChildren[newEndIndex]\n\n    function makeIndexByKey(children) {\n        let map = {}\n        children.forEach((child, index) => {\n            map[child.key] = index\n        })\n        return map\n    }\n    let map = makeIndexByKey(oldChildren)\n\n    while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n\n        if (!oldStartVNode) {\n            oldStartVNode = oldChildren[++oldStartIndex]\n        } else if (!oldEndVNode) {\n            oldEndVNode = oldChildren[--oldEndIndex]\n        } else if (isSameVNode(oldStartVNode, newStartVNode)) {\n            patchVNode(oldStartVNode, newStartVNode)\n            oldStartVNode = oldChildren[++oldStartIndex]\n            newStartVNode = newChildren[++newStartIndex]\n        } else if (isSameVNode(oldEndVNode, newEndVNode)) {\n            patchVNode(oldEndVNode, newEndVNode)\n            oldEndVNode = oldChildren[--oldEndIndex]\n            newEndVNode = newChildren[--newEndIndex]\n        } else if (isSameVNode(oldEndVNode, newStartVNode)) {\n            patchVNode(oldEndVNode, newStartVNode)\n            el.insertBefore(oldEndVNode.el, oldStartVNode.el)\n            oldEndVNode = oldChildren[--oldEndIndex]\n            newStartVNode = newChildren[++newStartIndex]\n\n        } else if (isSameVNode(oldStartVNode, newEndVNode)) {\n            patchVNode(oldStartVNode, newEndVNode)\n            el.insertBefore(oldStartVNode.el, oldEndVNode.el.nextSibling)\n            oldStartVNode = oldChildren[++oldStartIndex]\n            newEndVNode = newChildren[--newEndIndex]\n\n        } else {\n            let moveIndex = map[newStartVNode.key]\n            if (moveIndex != undefined) {\n                let moveVNode = oldChildren[moveIndex]\n                el.insertBefore(moveVNode.el, oldStartVNode.el)\n                oldChildren[moveIndex] = undefined\n                patchVNode(moveVNode, newStartVNode)\n            } else {\n                el.insertBefore(createElm(newStartVNode), oldStartVNode.el)\n            }\n            newStartVNode = newChildren[++newStartIndex]\n        }\n\n\n    }\n\n    if (newStartIndex <= newEndIndex) {//新的多余\n        for (let i = newStartIndex; i <= newEndIndex; i++) {\n            let child = createElm(newChildren[i])\n            //el.appendChild(child)\n            let anchor = newChildren[newEndIndex + 1] ? newChildren[newEndIndex + 1].el : null\n            el.insertBefore(child, anchor)\n        }\n    }\n\n    if (oldStartIndex <= oldEndIndex) {//老的多余\n        for (let i = oldStartIndex; i <= oldEndIndex; i++) {\n            if (oldChildren[i]) {\n                let child = oldChildren[i].el\n                el.removeChild(child)\n            }\n        }\n    }\n\n\n\n}\n\nfunction mountChildren(el, newChildren) {\n    for (let i = 0; i < newChildren.length; i++) {\n        let child = newChildren[i]\n        el.appendChild(createElm(child))\n\n    }\n}\nfunction unmountChildren(el, newChildren) {\n    el.innerHTML = \"\"\n}","import { createElementVNode, createTextVNode } from \"../vdom/index\"\nimport Watcher from \"./watcher\"\nimport { patch } from \"../vdom/path\"\n\n\n\nexport function initLifeCycle(Vue) {\n    Vue.prototype._update = function (vNode) {\n        //有初始化和更新的功能\n        const vm = this\n        const el = vm.$el\n        const preVNode = vm._vNode\n        vm._vNode = vNode\n        if (preVNode) {//判断是否dom，diff算法\n            vm.$el = patch(preVNode, vNode)\n\n        } else {\n            vm.$el = patch(el, vNode)\n\n        }\n\n    }\n    Vue.prototype._c = function () {\n        return createElementVNode(this, ...arguments)\n    }\n    Vue.prototype._v = function () {\n        return createTextVNode(this, ...arguments)\n    }\n    Vue.prototype._s = function (value) {\n        if (typeof value !== \"object\") return value\n        return JSON.stringify(value)\n    }\n    Vue.prototype._render = function () {\n        //const vm = this\n        //渲染时，会从实例取值\n        return this.$options.render.call(this)\n    }\n\n}\n\n\nexport function mountComponent(vm, el) {\n    vm.$el = el\n    //调用render方法产生虚拟节点\n\n    // new Watcher(vm, () => {\n    //     vm._update(vm._render())\n    // })\n    const updateComponent = () => {\n        vm._update(vm._render())\n    }\n\n    new Watcher(vm, updateComponent, true)\n    //根据虚拟dom产生真实dom\n    //插入el中\n}","const starts = {}\nconst LIFECYCLE = [\n    \"beforeCreate\",\n    \"created\"\n]\nLIFECYCLE.forEach(hook => {\n    starts[hook] = function (p, c) {\n        if (c) {\n            if (p) {\n                return p.concat(c)\n            } else {\n                return [c]\n            }\n        } else {\n            return p\n        }\n    }\n})\n\nstarts.components = function (parentVal, childVal) {\n    //debugger;\n    const res = parentVal ? Object.create(parentVal) : {}\n    if (childVal) {\n        for (let key in childVal) {\n            res[key] = childVal[key]\n        }\n    }\n\n    return res\n}\n\nexport function mergeOptions(parent, child) {\n    const options = {}\n    for (let key in parent) {\n        mergeField(key)\n    }\n    for (let key in child) {\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key)\n        }\n    }\n\n    function mergeField(key) {\n        if (starts[key]) {\n            options[key] = starts[key](parent[key], child[key])\n        } else {\n            options[key] = child[key] || parent[key]\n        }\n    }\n    return options\n\n}","import { initState } from \"./state\"\nimport { compileToFunction } from \"./compiler/index\"\nimport { mountComponent } from \"./observe/lifecycle\"\nimport { mergeOptions } from \"./utils\"\nexport function initMixin(Vue) {//給Vue增加init方法\n    Vue.prototype._init = function (options) {//options用户选项\n        const vm = this\n        vm.$options = mergeOptions(this.constructor.options, options)//Vue自己的属性\n\n        initState(vm)//初始化状态\n\n        if (options.el) {\n            vm.$mount(options.el)//数据挂载\n        }\n    }\n\n    Vue.prototype.$mount = function (el) {\n        let vm = this\n        el = document.querySelector(el);\n        let ops = vm.$options\n        if (!ops.render) {//查找是否有render函数\n            let template\n\n            //是否有内外两部分的template\n            if (!ops.template && el) {//没有模版，但有el\n                template = el.outerHTML\n            } else {\n                // if (el) {\n                template = ops.template//如果有el，采用模版内容\n                //}\n            }\n            if (template) {//是否有template，有就用\n                const render = compileToFunction(template)\n                ops.render = render\n            }\n        }\n        mountComponent(vm, el)//组件挂载\n    }\n}\n\n","import { mergeOptions } from \"./utils\"\n\nexport function initGlobalAPI(Vue) {//合并\n\n    Vue.options = { _base: Vue }\n    Vue.mixin = function (mixin) {\n        this.options = mergeOptions(this.options, mixin)\n        return this\n    }\n\n    Vue.extend = function (options) {//模版渲染\n        function Sub(options = {}) {\n            this._init(options)\n        }\n        Sub.prototype = Object.create(Vue.prototype)\n        Sub.prototype.constructor = Sub\n        Sub.options = mergeOptions(Vue.options, options)\n\n        return Sub\n    }\n    Vue.options.component = {}\n    Vue.component = function (id, definition) {\n        definition = typeof definition === \"function\" ? definition : Vue.extend(definition)\n\n        Vue.options.component[id] = definition\n    }\n}","import { compileToFunction } from \"./compiler\"\nimport { initMixin } from \"./init\"\nimport { initLifeCycle } from \"./observe/lifecycle\"\n//import Watcher, { nextTick } from \"./observe/watcher\"\nimport { initStateMixin } from \"./state.js\"\nimport { createElm, patch } from \"./vdom/path\"\nimport { initGlobalAPI } from \"./globalAPI.js\"\nfunction Vue(options) {//options用户选项\n    this._init(options)\n}\n\n\n\n\ninitMixin(Vue)//扩展init方法\ninitLifeCycle(Vue)//模版渲染\n\n\ninitStateMixin(Vue)//nextTick，Watch\n\ninitGlobalAPI(Vue)\n\n\n\n\n//------------------------------\n\n// let r1 = compileToFunction(`  <ul>\n// <li key=\"a\">a</li>\n// <li key=\"b\">b</li>\n// <li key=\"c\">c</li>\n// <li key=\"d\">d</li>\n// <li key=\"e\">e</li>\n// </ul>`)\n// let r2 = compileToFunction(`  <ul>\n// <li key=\"c\">c</li>\n// <li key=\"a\">a</li>\n// <li key=\"p\">p</li>\n// <li key=\"d\">d</li>\n// <li key=\"e\">e</li>\n// <li key=\"i\">i</li>\n// </ul>`)\n\n// let v1 = new Vue({ data: { name: \"1\" } })\n// let p1 = r1.call(v1)\n// let e1 = createElm(p1)\n// document.body.appendChild(e1)\n\n// let v2 = new Vue({ data: { name: \"2\" } })\n// let p2 = r2.call(v2)\n\n\n// setTimeout(() => {\n//     let e2 = createElm(p2)\n//     e1.parentNode.replaceChild(e2, e1)\n// }, 5000)\n\n\nexport default Vue"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","parent","start","node","push","chars","text","replace","end","pop","length","advance","n","substring","parseStartTag","match","tagName","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","i","obj","split","forEach","item","key","JSON","stringify","slice","gen","codeGen","test","token","lastIndex","exec","index","trim","join","genChildren","map","child","ast","code","compileToFunction","template","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","method","args","result","call","inserted","ob","__ob__","observeArray","dep","notify","Observe","data","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","observe","dependArray","current","depend","childOb","get","set","newValue","Watcher","vm","exprOrFn","options","cb","renderWatcher","getter","deps","depsID","Set","lazy","dirty","user","undefined","run","has","add","addSub","queueWatcher","console","log","oldVal","newVal","queue","pending","flushSchedulerQueue","flushQueue","setTimeout","callback","waiting","flushCallbacks","cbs","timeFunc","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","characterData","textContent","setImmediate","nextTick","initState","opts","$options","initData","computed","initComputed","watch","initWatch","proxy","_data","watchers","_computedWatchers","userDef","fn","defineComputed","setter","createComputedGetter","evaluate","handler","createWatcher","$watch","initStateMixin","Vue","$nextTick","isReservedTag","includes","createElementVNode","vNode","Ctor","components","createComponentVNode","_base","extend","hook","init","instance","componentInstance","componentOptions","$mount","createTextVNode","isSameVNode","oldNode","newNode","patchProps","el","oldProps","props","oldStyle","style","newStyle","removeAttribute","styleName","setAttribute","createComponent","v","createElm","$el","createElement","appendChild","patch","oldVNode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","patchVNode","oldChildren","newChildren","updateChildren","mountChildren","unmountChildren","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVNode","newStartVNode","oldEndVNode","newEndVNode","makeIndexByKey","moveIndex","moveVNode","anchor","innerHTML","initLifeCycle","_update","preVNode","_vNode","_c","arguments","_v","_s","_render","mountComponent","updateComponent","starts","LIFECYCLE","p","c","concat","parentVal","childVal","res","mergeOptions","mergeField","hasOwnProperty","initMixin","_init","constructor","querySelector","ops","outerHTML","initGlobalAPI","mixin","Sub","component","definition"],"mappings":"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"}